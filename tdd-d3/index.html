<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Better D3 Charts with TDD</title>

		<meta name="description" content="Talk about D3 best practices">
		<meta name="author" content="Marcos Iglesias">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
        <link rel="logo" type="image/svg" href="/logo.svg" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/custom.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>
        <div class="reveal">
            <div class="slides">

                <!-- Opening -->
                <section>
                    <h2>Better D3 Charts with TDD</h2>
                    <div>
                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="400" height="400" viewBox="-10 -10 116 111">
                            <defs>
                                <path id="deethree" d="M0,0h7.75a45.5,45.5 0 1 1 0,91h-7.75v-20h7.75a25.5,25.5 0 1 0 0,-51h-7.75zm36.2510,0h32a27.75,27.75 0 0 1 21.331,45.5a27.75,27.75 0 0 1 -21.331,45.5h-32a53.6895,53.6895 0 0 0 18.7464,-20h13.2526a7.75,7.75 0 1 0 0,-15.5h-7.75a53.6895,53.6895 0 0 0 0,-20h7.75a7.75,7.75 0 1 0 0,-15.5h-13.2526a53.6895,53.6895 0 0 0 -18.7464,-20z"/>
                            </defs>
                            <use stroke="black" stroke-width="20" fill="none" xlink:href="#deethree"/>
                            <use fill="white" xlink:href="#deethree"/>
                        </svg>
                    </div>
                    <aside class="notes">
                        <ul>
                            <li>Hi! Thank you guys for coming and thanks for caring about improving your D3 skills and code (quality).</li>
                            <li>I used to start a new D3 chart by taking an example as a jumping-off point. I could modify it, plug in new data and I would have something that worked.</li>
                            <li>However, this (way of coding) comes with a bunch of problems, especially those related to the reusability^, extendability^, simplicity^ and general quality~ of that code.</li>
                            <li>It is a fact that software always changes, so how do we prepare for change?</li>
                            <li>In this talk, I will show you how to make your D3 charts easier to create and easier to maintain. We’ll do this with Test Driven Development and the Reusable Chart API, which is a way of componetize D3 code.</li>
                            <li>At the end of this talk, you should be able to test your D3 code. And for that I will give you some tools and share some ideas about how to get started.</li>
                            <li>But first, some words about me.</li>
                        </ul>
                    </aside>
                </section>

                <!-- Bio -->
                <section>
                    <section>
                        <div style="padding-bottom: 40px;">
                            <img data-src="img/logos/eventbrite-logo.png" width="80%" alt="Eventbrite Logo">
                        </div>
                        <aside class="notes">
                            <ul>
                                <li>My name is...</li>
                                <li>Sr. Software Engineer at Eventbrite</li>
                                <li>Build User Interfaces and Dashboards for our event organizers</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h2>Online</h2>
                        <ul>
                            <li><a target="_blank" href="https://twitter.com/golodhros">@golodhros</a></li>
                            <li><a target="_blank" href="http://www.eventbrite.com/engineering/">Eventbrite Engineering Blog</a></li>
                        </ul>
                        <aside class="notes">
                            <ul>
                                <li>You can find me on twitter, where I share articles and resources about dataviz, d3 and front end technologies in general.</li>
                                <li>I also write EB's engineering blog</li>
                                <li>Let's now see what brought you here</li>
                            </ul>
                        </aside>
                    </section>
                </section>

                <!-- Next up -->
                <section>
                    <h2>Next up</h2>
                    <ul>
                        <li class="fragment">D3 Intro</li>
                        <li class="fragment">Usual Workflow</li>
                        <li class="fragment">Reusable Chart API</li>
                        <li class="fragment">TDD Way</li>
                        <li class="fragment">How to get started</li>
                        <li class="fragment">Q&A</li>
                    </ul>
                    <aside class="notes">
                        <ul>
                            <li>In the next 45 minutes I will give a small intro to D3</li>
                            <li>and the usual worflow when building d3 charts</li>
                            <li>I will introduce the Reusable Chart API</li>
                            <li>and review the TDD way of working with D3</li>
                            <li>I'll talk about how you can get started</li>
                            <li>and I hope we'll have some time left for questions</li>
                        </ul>
                    </aside>
                </section>

                <!-- Disclaimer -->
                <section>
                    <a href="https://bleedingedgepress.com/our-books/developing-a-d3-js-edge/"><img src="img/books/developingad3edge.jpg" style="width: 50%;"></a>
                    <aside class="notes">
                        <ul>
                            <li>A small disclaimer</li>
                            <li>I haven't invented any of the techniques I will be talking about today</li>
                            <li>The examples and the code that I’ll show evolved from this book, Developing a D3.js Edge, a lovely little book that I recommend to everyone interested in improving their D3 skills.</li>
                            <li>T: I don't see this ideas enough in the code I see in articles, and I think they are worth sharing, because I felt the pain, and now I work in a more pleasant way.</li>
                        </ul>
                    </aside>
                </section>

                <!-- D3 Intro -->
                <section>
                    <section>
                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="400" height="400" viewBox="-10 -10 116 111">
                            <defs>
                                <path id="deethree" d="M0,0h7.75a45.5,45.5 0 1 1 0,91h-7.75v-20h7.75a25.5,25.5 0 1 0 0,-51h-7.75zm36.2510,0h32a27.75,27.75 0 0 1 21.331,45.5a27.75,27.75 0 0 1 -21.331,45.5h-32a53.6895,53.6895 0 0 0 18.7464,-20h13.2526a7.75,7.75 0 1 0 0,-15.5h-7.75a53.6895,53.6895 0 0 0 0,-20h7.75a7.75,7.75 0 1 0 0,-15.5h-13.2526a53.6895,53.6895 0 0 0 -18.7464,-20z"/>
                            </defs>
                            <use stroke="black" stroke-width="20" fill="none" xlink:href="#deethree"/>
                            <use fill="white" xlink:href="#deethree"/>
                        </svg>
                        <aside class="notes">
                            <ul>
                                <li>[Poll]</li>
                                <li>Who has some experience with D3?</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- What is D3 -->
                    <section>
                        <h2>What is D3.js?</h2>
                        <ul>
                            <li class="fragment">Data-Driven Documents</li>
                            <li class="fragment">Low level, General Purpose Visualization Library</li>
                            <li class="fragment">Manipulates data based documents</li>
                            <li class="fragment">Open web standards (SVG, HTML, CSS and now Canvas)</li>
                            <li class="fragment">Allows interactions with your graphs</li>
                        </ul>
                        <aside class="notes">
                            <ul>
                                <li>D3 stands for data-driven documents</li>
                                <li>with a huge API </li>
                                <li>and focused on mathematical transformations of data</li>
                                <li>Based on web standards as SVG, HTML, CSS and canvas</li>
                                <li>One of it’s more celebrated features is it’s seamless integration of animations and the way it allows us to create engaging interactions.</li>
                                <li>In general, it is a Front End toolbox for creating interactive visualizations.</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- How does it work? -->
                    <section>
                        <h2>How does it work?</h2>
                        <ul>
                            <li class="fragment">Loads data</li>
                            <li class="fragment">Binds data to elements</li>
                            <li class="fragment">Transforms those elements</li>
                            <li class="fragment">Transitions between states</li>
                        </ul>
                        <aside class="notes">
                            <ul>
                                <li>D3 loads data and attaches it to the DOM.</li>
                                <li>Binds that data to DOM elements</li>
                                <li>and transforms those elements,</li>
                                <li>transitioning among states if necessary.</li>
                                <li>Let's see my favorite demo</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- D3 Demo - Budget -->
                    <section>
                        <h2>D3 Demo</h2>
                        <a target="_blank" href="http://www.nytimes.com/interactive/2012/02/13/us/politics/2013-budget-proposal-graphic.html?_r=0"><img src="img/chart/budget.png" alt="Obama Budget Proposal" style="width: 80%;"></a>
                        <aside class="notes">
                            <ul>
                                <li>This is a dataviz of Obama's administration budget for 2013</li>
                                <li>Each bubble represent a data entry. The transformation I was referring is the size and color of the bubble, so the bigger the bubble, the higher the quantity; the greener it is, the higher the rise against previous year.</li>
                                <li>That’s not all, as we can click on one of the buttons and it changes the focus of the visualization, using the same data but showing another point of view code on the position.</li>
                                <li>Check out the animations, they are kind of “automatic”. Magic!</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Niceties -->
                    <section>
                        <h2>D3 Niceties</h2>
                        <ul>
                            <li class="fragment">Styling of elements with CSS</li>
                            <li class="fragment">Transitions and animations baked in</li>
                            <li class="fragment">Total control over our graphs</li>
                            <li class="fragment">Amazing community</li>
                            <li class="fragment">Decent amount of publications</li>
                        </ul>
                        <aside class="notes">
                            <ul>
                                <li>Same tools as FE development, styles, devtools</li>
                                <li>so we can create stunning UIs</li>
                                <li>Everything is configurable</li>
                                <li>with an active slack channel</li>
                                <li>A lot of books about d3</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- D3 v4 update -->
                    <section>
                        <h2>D3 v4 Update</h2>
                        <ul>
                            <li class="fragment">More modular</li>
                            <li class="fragment">API improvements</li>
                            <li class="fragment">Breaking changes</li>
                            <li class="fragment">Highly adopted</li>
                        </ul>
                        <aside class="notes">
                            <ul>
                                <li>Recently got an update</li>
                                <li>All d3 is in sub-modules in different repos</li>
                                <li>Introduced some API changes that make sense</li>
                                <li>Everybody is on d3 v4, not like angular 1.x and 2</li>
                            </ul>
                        </aside>
                    </section>
                </section>

                <!-- Story -->
                <section>
                    <section>
                        <h1>Contracting story</h1>
                        <aside class="notes">
                            <ul>
                                <li>I was contracting for a B2B company with a data analysis dashboard product</li>
                            </ul>
                        </aside>
                    </section>
                    <!-- Story: he loved it -->
                    <section>
                        <h2>Marketing guy: Hey, I saw this nice chart, could we do something like that?</h2>
                        <aside class="notes">
                            <ul>
                                <li>Nice chart for a marketing page</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <img data-src="img/chart/bump.png" alt="Bump Chart">
                        <aside class="notes">
                            <ul>
                                <li>It was a bump chart, but uglier than this one</li>
                                <li>I followed my usual workflow and had something ready pretty quickly</li>
                            </ul>
                        </aside>
                    </section>
                    <!-- Story: he loved it -->
                    <section>
                        <h1>He loved it!</h1>
                    </section>
                </section>

                <!-- Usual workflow -->
                <section>
                    <section>
                        <h1>Usual workflow</h1>
                        <aside class="notes">
                            <ul>
                                <li>That workflow starts...</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Idea or Requirement -->
                    <section>
                        <img data-src="img/fun/idea.png" alt="Idea">
                    </section>

                    <!-- Search for an Example -->
                    <section>
                        <h2>Search for an example</h2>
                        <img data-src="img/diagram/example-step.png" height="220" width="703" alt="Idea">
                        <aside class="notes">
                            <ul>
                                <li>Several options</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Adapt Code -->
                    <section>
                        <h1>Read and adapt code</h1>
                    </section>

                    <!-- Add Features -->
                    <section>
                        <h1>Add/remove features</h1>
                    </section>

                    <!-- Polish -->
                    <section>
                        <h2>Polish it up</h2>
                        <img data-src="img/fun/wax-on.jpg" alt="Wax on, Wax off">
                    </section>

                    <!-- It's a Good plan -->
                    <section>
                        <h2>Usual workflow</h2>
                        <ul>
                            <li class="">Idea or requirement</li>
                            <li class="">Search for an example</li>
                            <li class="">Adapt the code</li>
                            <li class="">Add/remove features</li>
                            <li class="">Polish it up</li>
                        </ul>
                        <aside class="notes">
                            <ul>
                                <li>Looks like a good plan, right?</li>
                                <li>The problem lays on the code we need to adapt, as it is usually written in the standard way.</li>
                            </ul>
                        </aside>
                    </section>
                </section>

                <!-- The Standard Way -->
                <section>
                    <section>
                        <h1>The standard way</h1>
                        <aside class="notes">
                            <ul>
                                <li>The Standard Way is just the way we usually find D3 code on the Internet</li>
                                <li>I will use a different example to show it</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Example -->
                    <section>
                        <h2>Code example</h2>
                        <a href="http://bost.ocks.org/mike/bar/"><img data-src="img/screenshots/lets-make-a-bar-chart.png" alt="" style="width: 80%;"></a>
                        <small class="reference"><a target="_blank" href="http://bl.ocks.org/mbostock/3885304">Bar chart example</a> by Mike Bostock</small>
                        <aside class="notes">
                            <ul>
                                <li>Simplest example</li>
                                <li>One of my first contacts with D3 was via this article</li>
                                <li>Although there is not a lot of code, there is a lot of stuff happening here.</li>
                                <li>Let's dive into it</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Code Analysis of the example -->
                    <!-- Setting Up Container -->
                    <section>
                        <h2>Prepare container</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
var svg = d3.select("svg"),
    margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom;

var g = svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
                        </code></pre>
                        <small class="reference">Reference: <a target="_blank" href="http://bl.ocks.org/mbostock/3019563">Margin Convention</a></small>
                        <aside class="notes">
                            <ul>
                                <li>First D3 pattern: Mike Bostock Margin Convention</li>
                                <li>It can be considered a hack, but only once per chart</li>
                                <li>T: Before discovering this pattern, moving stuff was hard</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Setting up Scales -->
                    <section>
                        <h2>Setting up scales</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
// Creates scales and gives them ranges
var x = d3.scaleBand().rangeRound([0, width]).padding(0.1),
    y = d3.scaleLinear().rangeRound([height, 0]);
                        </code></pre>
                        <small>Reference: <a target="_blank" href="http://alignedleft.com/tutorials/d3/scales">Scales tutorial</a></small>
                        <aside class="notes">
                            <ul>
                                <li>Scales are functions that glue data and pixels</li>
                                <li>T: Input domain, output range</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Loading Data -->
                    <section>
                        <h2>Loading data</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
d3.tsv("data.tsv", function(d) {
    d.frequency = +d.frequency;
    return d;
}, function(error, data) {
    if (error) throw error;
    // Chart Code here
});
                        </code></pre>
                        <aside class="notes">
                            <ul>
                                <li>Callback pattern</li>
                                <li>Cleaning function that coerces the values to be a number with this JS hack</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Drawing Axes -->
                    <section>
                        <h2>Drawing axes</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
// Updates domain of scales
x.domain(data.map(function(d) { return d.letter; }));
y.domain([0, d3.max(data, function(d) { return d.frequency; })]);

// Draws X axis
g.append("g")
    .attr("class", "axis axis--x")
    .attr("transform", "translate(0," + height + ")")
    .call(d3.axisBottom(x));

// Draws Y axis
g.append("g")
    .attr("class", "axis axis--y")
    .call(d3.axisLeft(y).ticks(10, "%"))
  .append("text")
    .attr("transform", "rotate(-90)")
    .attr("y", 6)
    .attr("dy", "0.71em")
    .attr("text-anchor", "end")
    .text("Frequency");
                        </code></pre>
                        <aside class="notes">
                            <ul>
                                <li>Set the domain of the scales, dependent on the data</li>
                                <li>Creates the Axis, that are visual representations of those scales</li>
                                <li>Draws the x and y axes, labeling the latter</li>
                                <li>T: Note the weird indentation. When a selection is being changed, we use 2 spaces.</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Drawing Chart Bars  -->
                    <section>
                        <h2>Drawing bars</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
g.selectAll(".bar")
    .data(data)
    .enter()
      .append("rect")
        .attr("class", "bar")
        .attr("x", function(d) { return x(d.letter); })
        .attr("y", function(d) { return y(d.frequency); })
        .attr("width", x.bandwidth())
        .attr("height", function(d) { return height - y(d.frequency); });
                        </code></pre>
                        <aside class="notes">
                            <ul>
                                <li>Here we see the Enter pattern, where for each data entry, we add a new SVG rectangle</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Output -->
                    <section>
                        <h2>Output</h2>
                        <img src="img/chart/mbBarChart_Fotor.jpg" height="493" width="945" alt="">
                        <aside class="notes">
                            <ul>
                                <li>So, now we have a bar chart that works right?</li>
                                <li>Well… it’s true, it works, and probably you could copy this code, modify it a bit and use it somewhere in your website.</li>
                                <li>But I don't think this is good-quality code.</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Drawbacks -->
                    <section>
                        <h2>Standard D3: drawbacks</h2>
                        <ul>
                            <li class="fragment">Monolithic functions</li>
                            <li class="fragment">Chained method calls</li>
                            <li class="fragment">Hard to change code</li>
                            <li class="fragment">Impossible to reuse</li>
                            <li class="fragment">Delicate</li>
                        </ul>
                        <aside class="notes">
                            <ul>
                                <li>Read from top to bottom to know what is doing</li>
                                <li>Compact code that is not really flexible</li>
                                <li>Hardcoded values and strings</li>
                                <li>Reuse is copy/paste, not DRY</li>
                                <li>Won’t know if it works after modifying any line of code</li>
                                <li>Let's see what this has to do with my story</li>
                            </ul>
                        </aside>
                    </section>
                </section>

                <!-- Story continues -> Refactoring -->
                <section>
                    <section>
                        <h1>Story continues...</h1>
                        <aside class="notes">
                            <ul>
                                <li>Remember I had a bump chart, and he loved it</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <img data-src="img/chart/bump.png" alt="Bump Chart">
                        <aside class="notes">
                            <ul>
                                <li>But you know, he was a marketing guy...</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h2>Marketing guy: What if we change this thing here...</h2>
                        <aside class="notes">
                            <ul>
                                <li>I would need to refactor, but this refactor was something like this:</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <img data-src="img/fun/refactoring-cat.gif" alt="" style="width: 60%;" >
                        <aside class="notes">
                            <ul>
                                <li>Because I wasn't refactoring, I was just changing things!</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <img data-src="img/fun/magic-number.jpg" alt="">
                        <aside class="notes">
                            <ul>
                                <li>So I had to deal with some magic numbers</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h1>Trial and error</h1>
                    </section>
                    <section>
                        <img data-src="img/fun/bug.jpg" width="400" alt="">
                        <aside class="notes">
                            <ul>
                                <li>Kill some bugs</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h2>Done!</h2>
                    </section>
                    <section>
                        <h2>M-guy: nice, let’s change this other thing!</h2>
                    </section>
                    <section>
                        <img data-src="img/fun/keep-calm-and-refactor.png" alt="">
                        <aside class="notes">
                            <ul>
                                <li>You keep it cool</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <img data-src="img/fun/evil-bug.gif" alt="" style="width: 60%;">
                        <aside class="notes">
                            <ul>
                                <li>Fight some nasty bugs</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h2>Done!</h2>
                    </section>
                    <section>
                        <h2>M-guy: Great! I love it so much I want it on the product!</h2>
                    </section>
                    <section>
                        <h2>M-guy: So good you have it almost ready, right?</h2>
                        <aside class="notes">
                            <ul>
                                <li>More quality was necessary</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <img data-src="img/fun/keep-calm-and-refactor-again.png" width="400" alt="">
                    </section>
                    <section>
                        <img data-src="img/fun/bug.jpg" width="400" alt="">
                    </section>
                    <section>
                        <img data-src="img/fun/i-have-no-idea-what-im-doing.jpg" alt="" style="width: 80%;">
                        <aside class="notes">
                            <ul>
                                <li>I had to deal with some Impostor syndrome at that point</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <img data-src="img/fun/evil-bug.gif" alt="" style="width: 60%;">
                        <aside class="notes">
                            <ul>
                                <li>More nasty bugs</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <img data-src="img/fun/headdesk.png" alt="" style="width: 80%;">
                        <aside class="notes">
                            <ul>
                                <li>A terrible experience</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h1>I was hating myself!</h1>
                        <aside class="notes">
                            <ul>
                                <li>That day my usual workflow failed me!</li>
                                <li>I know you must have felt this way sometimes</li>
                                <li>In my mind, there are 3 different</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h2>Possible outcomes</h2>
                        <ul>
                            <li class="fragment">You keep on refactoring as needed</li>
                            <li class="fragment">You dump it and start all over again</li>
                            <li class="fragment">You avoid refactoring</li>
                        </ul>
                        <aside class="notes">
                            <ul>
                                <li>More effort than what it’s worth</li>
                                <li>Dump is Hard, because of the investment</li>
                                <li>Heroic, could be the fastest (at first)</li>
                                <li>First two are not really time effective</li>
                                <li>Last option could end in something like this:</li>
                            </ul>
                        </aside>
                    </section>
                    <!-- Screenshot of Render Method -->
                    <section>
                        <div style="padding-bottom: 20px; overflow: auto; max-height: 450px;">
                            <img data-src="img/screenshots/render-method.png" alt="">
                        </div>
                        <aside class="notes">
                            <ul>
                                <li>Any developer would have a hard time working with this code</li>
                                <li>If you ever do something like this, the next developer will hate you</li>
                            </ul>
                        </aside>
                    </section>
                </section>

                <!-- Sentence -->
                <section>
                    <h2>What if you could work with charts the same way you work with the rest of the code?</h2>
                    <aside class="notes">
                        <ul>
                            <li></li>
                        </ul>
                    </aside>
                </section>

                <!-- Reusable Chart API -->
                <section>
                    <section>
                        <h1>Reusable Chart API</h1>
                        <aside class="notes">
                            <ul>
                                <li>Who knows what the reusable chart API is?</li>
                                <li>Essentially a way of creating components for D3 charts.</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- jQuery VS MV* libraries -->
                    <section>
                        <h2>jQuery VS MV*</h2>
                        <aside class="notes">
                            <ul>
                                <li>It’s like when we moved away from jQuery based UIs to MVC or MV* frameworks</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Towards Reusable Charts -->
                    <section>
                        <h2>Where did it start?</h2>
                        <a href="http://bost.ocks.org/mike/chart/"><img data-src="img/screenshots/towards-reusable-charts.png" alt="" style="width: 80%;"></a>
                        <small class="reference"><a target="_blank" href="http://bost.ocks.org/mike/chart/">Towards Reusable Charts</a> by Mike Bostock</small>
                        <aside class="notes">
                            <ul>
                                <li>First mention in Mike Bostock's seminal post Towards Reusable Charts</li>
                                <li>It hasn’t changed a lot since then</li>
                                <li>T: Well known, established technique. Libraries based in d3 like NVD3 uses it. I found it on DD3E and Mastering D3.</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Code -->
                    <section>
                        <h2>Reusable Chart API - code</h2>
                        <pre><code>
return function module(){
    // @param  {D3Selection} _selection  Container(s) to render chart in
    function exports(_selection){
        // @param {object} _data    Data to generate the chart
        _selection.each(function(_data){
            // Build chart
        });
    }

    // @param  {object} _x          Margin object to get/set
    // @return { margin | module}   Current margin or Bar Chart module to chain calls
    exports.margin = function(_x) {
        if (!arguments.length) return margin;
        margin = _x;
        return this;
    };

    return exports;
}
                        </code></pre>
                        <aside class="notes">
                            <ul>
                                <li>Returns a function that will accept a d3 selection as input</li>
                                <li>It will extract the data from that selection to build a chart, using the selection as container.</li>
                                <li>T: It will also accept some configuration, set beforehand.</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Use -->
                    <section>
                        <h2>Reusable Chart API - use</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
// Creates bar chart component and configures its margins
barChart = chart()
    .margin({top: 5, left: 10});

container = d3.select('.chart-container');

// Calls bar chart with the data-fed selector
container.datum(dataset).call(barChart);
                        </code></pre>
                        <aside class="notes">
                            <ul>
                                <li>T: We could also create different instances of the same chart</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Benefits -->
                    <section>
                        <h2>Reusable Chart API - benefits</h2>
                        <ul>
                            <li class="fragment">Modular</li>
                            <li class="fragment">Composable</li>
                            <li class="fragment">Configurable</li>
                            <li class="fragment">Consistent</li>
                            <li class="fragment">Teamwork Enabling</li>
                            <li class="fragment">Testable</li>
                        </ul>
                        <aside class="notes">
                            <ul>
                                <li>Change of mindset, from building charts to components. Create a library.</li>
                                <li>You can build higher-order components from different elements.</li>
                                <li>Rendered output can change without changing the code, as we separate the core from the configuration</li>
                                <li>Components follow the same structure, we can reuse methods between charts</li>
                                <li>Easy to grab for newcomers and easy to share workload</li>
                                <li>The most important, no legacy code</li>
                            </ul>
                        </aside>
                    </section>
                </section>

                <!-- TDD Way -->
                <section>
                    <section>
                        <h1>The TDD way</h1>
                        <aside class="notes">
                            <ul>
                                <li>Cool! Are you still with me?</li>
                                <li>We have seen the problems of example based code and a solution, the Reusable Chart API.</li>
                                <li>Solution allows us to test, opening a new world of possibilities. Among them is to Test Driven our Charts.</li>
                                <li>Craft the same bar chart test-by-test</li>
                                <li>T: I will skip some steps</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Step by Step -->
                    <section>
                        <h2>The "before" block</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
container = d3.select('.test-container');
dataset = [
    {   letter: 'A',
        frequency: .08167
    },{
        letter: 'B',
        frequency: .01492
    },...
];
barChart = barChart();

container.datum(dataset).call(barChart);
                        </code></pre>
                        <aside class="notes">
                            <ul>
                                <li>3 things: container, data and chart instance</li>
                                <li>call chart with the container which has the data attached</li>
                                <li>T: datum adds the data, but doesn't do a join</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Test: Basic Chart -->
                    <section>
                        <h2>Test: basic chart</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
it('should render a chart with minimal requirements', function(){
    expect(containerFixture.select('.bar-chart').empty()).toBeFalsy();
});
                        </code></pre>
                        <aside class="notes">
                            <ul>
                                <li>Several ways of checking for an element</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Code: Basic Chart -->
                    <section>
                        <h2>Code: basic chart</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
return function module(){
    var margin = {top: 20, right: 20, bottom: 30, left: 40},
        width = 960, height = 500,
        svg;

    function exports(_selection){
        _selection.each(function(_data){
            var chartWidth = width - margin.left - margin.right,
                chartHeight = height - margin.top - margin.bottom;

            if (!svg) {
                svg = d3.select(this)
                    .append('svg')
                    .classed('bar-chart', true);
            }
        });
    };
    return exports;
}
                        </code></pre>
                        <small class="reference">Reference: <a href="http://bost.ocks.org/mike/chart/" target="_blank">Towards Reusable Charts</a></small>
                    </section>

                    <!-- Test: Containers -->
                    <section>
                        <h2>Test: containers</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
it('should render container, axis and chart groups', function(){
    expect(containerFixture.select('g.container-group').empty()).toBeFalsy();
    expect(containerFixture.select('g.chart-group').empty()).toBeFalsy();
    expect(containerFixture.select('g.x-axis-group').empty()).toBeFalsy();
    expect(containerFixture.select('g.y-axis-group').empty()).toBeFalsy();
});
                       </code></pre>
                       <aside class="notes">
                           <ul>
                               <li>Nice an tidy structure</li>
                           </ul>
                       </aside>
                    </section>

                    <!-- Code: Containers -->
                    <section>
                        <h2>Code: containers</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
function buildContainerGroups(){
    var container = svg
      .append('g')
        .classed('container-group', true)
        .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

    container.append("g").attr("class", "chart-group");
    container.append("g").attr("class", "x-axis-group axis");
    container.append("g").attr("class", "y-axis-group axis");
}
                       </code></pre>
                    </section>

                    <!-- Test: Axes -->
                    <section>
                        <h2>Test: axes</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
it('should render an X and Y axes', function(){
    expect(containerFixture.select('.x-axis-group.axis').empty()).toBeFalsy();
    expect(containerFixture.select('.y-axis-group.axis').empty()).toBeFalsy();
});
                        </code></pre>
                        <aside class="notes">
                            <ul>
                                <li>Public effects are the axis elements on the DOM</li>
                            </ul>
                        </aside>
                    </section>

                    <!--  Code: Scales -->
                    <section>
                        <h2>Code: scales</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
function buildScales(){
    xScale = d3.scaleBand()
        .rangeRound([0, chartWidth]).padding(0.1)
        .domain(data.map(getLetter));

    yScale = d3.scaleLinear()
        .rangeRound([chartHeight, 0])
        .domain([0, d3.max(data, getFrequency)]);
}
                        </code></pre>
                        <aside class="notes">
                            <ul>
                                <li>Creating after getting data</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Code: Axes -->
                    <section>
                        <h2>Code: axes</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
function buildAxis(){
    xAxis = d3.axisBottom(xScale);

    yAxis = d3.axisLeft(yScale)
        .ticks(10, '%');
}
                        </code></pre>
                    </section>

                    <!-- Code: Axes Drawing -->
                    <section>
                        <h2>Code: axes drawing</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
function drawAxis(){
    svg.select('.x-axis-group.axis')
        .append("g")
        .attr("class", "axis axis--x")
        .attr("transform", "translate(0," + chartHeight + ")")
        .call(xAxis);

    svg.select(".y-axis-group")
        .append("g")
        .attr("class", "axis axis--y")
        .call(yAxis)
      .append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 6)
        .attr("dy", ".71em")
        .style("text-anchor", "end")
        .text("Frequency");
}
                        </code></pre>
                        <aside class="notes">
                            <ul>
                                <li>remember we first need the groups and svg</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Test: Bars Drawing -->
                    <section>
                        <h2>Test: bars drawing</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
it('should render a bar for each data entry', function(){
    var numBars = dataset.length;

    expect(containerFixture.selectAll('.bar').size()).toEqual(numBars);
});
                        </code></pre>
                        <aside class="notes">
                            <ul>
                                <li>Counting bars and data length</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Code: Bars Drawing -->
                    <section>
                        <h2>Code: bars drawing</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
function drawBars(){
    // Setup the enter, exit and update of the actual bars in the chart.
    // Select the bars, and bind the data to the .bar elements.
    var bars = svg.select('.chart-group').selectAll(".bar")
        .data(data);

    // Create bars for the new elements
    bars.enter()
      .append('rect')
        .attr("class", "bar")
        .attr("x", function(d) { return xScale(d.letter); })
        .attr("y", function(d) { return yScale(d.frequency); })
        .attr("width", xScale.rangeBand())
        .attr("height", function(d) { return chartHeight - yScale(d.frequency); });
}
                        </code></pre>
                        <small class="reference">Reference: <a target="_blank" href="http://bost.ocks.org/mike/join/">Thinking with joins</a>, <a target="_blank" href="http://bl.ocks.org/mbostock/3808218">General Update Pattern</a></small>
                        <aside class="notes">
                            <ul>
                                <li>Enter: creates elements as needed</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Test: Margin Accessor -->
                    <section>
                        <h2>Test: margin accessor</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
it('should provide margin getter and setter', function(){
    var previous = barChart.margin(),
        expected = {top: 4, right: 4, bottom: 4, left: 4},
        actual;

    barChart.margin(expected);
    actual = barChart.margin();

    expect(previous).not.toBe(expected);
    expect(actual).toBe(expected);
});
                        </code></pre>
                    </section>

                    <!-- Code: Margin Accessor -->
                    <section>
                        <h2>Code: margin accessor</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
exports.margin = function(_x) {
    if (!arguments.length) return margin;
    margin = _x;

    return this;
};
                        </code></pre>
                        <aside class="notes">
                            <ul>
                                <li>All-in-one getter and setter</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Output -->
                    <section>
                        <h2>Looks the same, but is not</h2>
                        <img src="img/chart/mbBarChart_Fotor.jpg" height="493" width="945" alt="">
                    </section>

                    <!-- Before and After -->
                    <!-- Final Code: Standard Way -->
                    <section>
                        <h2>Final code: standard way</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
var svg = d3.select("svg"),
    margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom;

var x = d3.scaleBand().rangeRound([0, width]).padding(0.1),
    y = d3.scaleLinear().rangeRound([height, 0]);

var g = svg.append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.tsv("data.tsv", function(d) {
    d.frequency = +d.frequency;
    return d;
}, function(error, data) {
    if (error) throw error;

    x.domain(data.map(function(d) { return d.letter; }));
    y.domain([0, d3.max(data, function(d) { return d.frequency; })]);

    g.append("g")
        .attr("class", "axis axis--x")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));

    g.append("g")
        .attr("class", "axis axis--y")
        .call(d3.axisLeft(y).ticks(10, "%"))
      .append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 6)
        .attr("dy", "0.71em")
        .attr("text-anchor", "end")
        .text("Frequency");

    g.selectAll(".bar")
        .data(data)
        .enter()
          .append("rect")
            .attr("class", "bar")
            .attr("x", function(d) { return x(d.letter); })
            .attr("y", function(d) { return y(d.frequency); })
            .attr("width", x.bandwidth())
            .attr("height", function(d) { return height - y(d.frequency); });
});
                        </code></pre>
                    </section>

                    <!-- Final Code: TDD Way -->
                    <section>
                        <h2>Final code: TDD way</h2>
                        <pre><code data-trim contenteditable class="javascript hljs">
return function module(){
    var margin = {top: 20, right: 20, bottom: 30, left: 40},
        width = 960, height = 500,
        chartWidth, chartHeight,
        xScale, yScale,
        xAxis, yAxis,
        data, svg;

    function exports(_selection){
        _selection.each(function(_data){
            chartWidth = width - margin.left - margin.right;
            chartHeight = height - margin.top - margin.bottom;
            data = _data;

            buildScales();
            buildAxis();
            buildSVG(this);
            drawBars();
            drawAxis();
        });
    }

    function buildContainerGroups(){ ... }

    function buildScales(){ ... }

    function buildAxis(){ ... }

    function drawAxis(){ ... }

    function drawBars(){ ... }

    // Accessors to all configurable attributes
    exports.margin = function(_x) { ... };

    return exports;
};
                        </code></pre>
                    </section>

                    <!-- TDD Benefits -->
                    <section>
                        <h2>TDD way - benefits</h2>
                        <ul>
                            <li class="fragment">Stress free refactors</li>
                            <li class="fragment">Goal oriented</li>
                            <li class="fragment">Deeper understanding</li>
                            <li class="fragment">Improved communication</li>
                            <li class="fragment">Quality, production ready output</li>
                        </ul>
                        <aside class="notes">
                            <ul>
                                <li>D3 is hard. There is a high chance that your first solution won't be the best. With the TDD way you won’t be afraid of touching your charts anymore.</li>
                                <li>As TDD forces you to have a clear idea of what you want to do</li>
                                <li>Learn more about the D3 API.</li>
                                <li>Create a documentation that does not get outdated. Small and specific code that can be understood easily.</li>
                                <li>Charts will be a first-class citizen inside your repo. Refactors, no rewrites.</li>
                            </ul>
                        </aside>
                    </section>
                </section>

                <!-- How to get started -->
                <section>
                    <section>
                        <h1>How to get started</h1>
                    </section>

                    <section>
                        <h2>Some ideas</h2>
                        <ul>
                            <li class="fragment">Test something that is in production</li>
                            <li class="fragment">TDD the last chart you built</li>
                            <li class="fragment">Pick a block, refactor it</li>
                            <li class="fragment">TDD your next chart</li>
                        </ul>
                        <aside class="notes">
                            <ul>
                                <li>Try to test something you have in production, just a bit</li>
                                <li>Check for the last easy chart you built, give it a read, and TDD it.</li>
                                <li>If you want to try something new, pick a block, refactor it into TDD</li>
                                <li>Write your next one with the reusable API</li>
                            </ul>
                        </aside>
                    </section>

                    <!-- Hands On -->
                    <section>
                        <h1>Jumpstart Repository</h1>
                        <small><a target="_blank" href="https://github.com/Golodhros/talk-tdd-d3">http://tinyurl.com/allThingsOpen</a></small>
                        <aside class="notes">
                            <ul>
                                <li>It could be the base for your own library</li>
                                <li>Uses Jasmine, Karma Runner</li>
                                <li>Run tests with `npm run test` and Debugging</li>
                            </ul>
                        </aside>
                    </section>
                    <!-- Check code repository -->
                    <!-- Explain structure, configuration files, etc -->
                    <!-- Run tests and check them -->

                    <!-- Britecharts -->
                    <section>
                        <a target="_blank" href="http://eventbrite.github.io/britecharts/index.html"><img src="img/screenshots/britecharts-ss.png" alt="" style="width: 70%; max-height: 600px;"></a>
                        <div>
                            <small class="reference"><a target="_blank" href="http://eventbrite.github.io/britecharts">http://eventbrite.github.io/britecharts</a></small>
                        </div>
                        <aside class="notes">
                            <ul>
                                <li>Another way of getting started: check out Britecharts</li>
                                <li>A charting library we open sourced at Eventbrite</li>
                                <li>started a couple of years ago from a refactor of some messy code we had in production</li>
                                <li>we needed a D3 library that could serve both d3 devs and non d3 savvy developers</li>
                                <li>big difference, opinionated on the ‘looks.'</li>
                            </ul>
                        </aside>
                    </section>
                </section>

                <!-- Story continues -> The good way -->
                <section>
                    <section>
                        <h2>What happened with my contracting gig?</h2>
                        <aside class="notes">
                            <ul>
                                <li>wondering what happened with my story</li>
                                <li>The bump chart was half-refactored</li>
                                <li>so I couldn't add tests due to the lack of structure</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h2>I used the Reusable Chart API</h2>
                        <aside class="notes">
                            <ul>
                                <li>for the next chart they asked me to build</li>
                                <li>at first, it was a Line chart of just one dimension</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h2>Adding multiple dimensions?</h2>
                        <aside class="notes">
                            <ul>
                                <li>when they asked me to add a second and third dimensions</li>
                                <li>T: to find correlations among the data</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h2>I had tests!</h2>
                        <aside class="notes">
                            <ul>
                                <li>My tests were there to back me up!</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <h2>Toogle dimensions, adding more y-axis?</h2>
                        <aside class="notes">
                            <ul>
                                <li>taking it to a new level of complexity</li>
                            </ul>
                        </aside>
                    </section>
                    <section>
                        <img data-src="img/fun/chill-cat.jpg" height="447" width="600" alt="">
                        <aside class="notes">
                            <ul>
                                <li>I was pretty chill</li>
                                <li>(Pause)</li>
                                <li>to wrap up...</li>
                            </ul>
                        </aside>
                    </section>
                </section>

                <!-- Conclusion -->
                <section>
                    <h2>Conclusions</h2>
                    <ul>
                        <li class="fragment">Examples are great for exploration and prototyping, bad for production code</li>
                        <li class="fragment">There is a better way of building D3 Charts</li>
                        <li class="fragment">Reusable Chart API + TDD bring it to a Pro level</li>
                        <li class="fragment">You can build your own library and feel proud!</li>
                    </ul>
                    <aside class="notes">
                        <ul>
                            <li>In this (talk), we have seen how the example-(based) approach to building D3 charts works on the short term, but in the mid and long term, it brings you pain and sorrow.</li>
                            <li>There is a better (way of building D3 charts).</li>
                            <li>Using the Reusable API and a test driven approach will make your D3 charts easier to create and a LOT (easier to maintain).</li>
                            <li>I want to encourage you (guys) to go the extra mile, and whenever you build a chart, make it into a component.</li>
                            <li>Use the Reusable API! Test it! And build your very own chart library! This way, I assure you, you will be proud of your code again!</li>
                        </ul>
                    </aside>
                </section>

                <!-- Thanks -->
                <section>
                    <h2>Thanks for listening!</h2>
                    <ul>
                        <li>
                            Twitter: <a target="_blank" href="https://twitter.com/golodhros">@golodhros</a>
                        </li>
                        <li>
                            Slides: <a href="http://golodhros.github.io/tdd-d3">http://golodhros.github.io/tdd-d3</a>
                        </li>
                        <li>
                            Code: <a href="http://www.github.com/Golodhros/talk-tdd-d3">http://tinyurl.com/allThingsOpen</a>
                        </li>
                    </ul>
                    <aside class="notes">
                        <ul>
                            <li>Thanks for listening and thanks for caring!</li>
                        </ul>
                    </aside>
                </section>

                <!-- Q&A -->

                <!-- Learning and Resources -->
                <section>
                    <h2>Learning resources</h2>
                    <ul>
                        <li>
                            <a href="https://engineering.eventbrite.com/d3-js-resources-to-level-up/">D3.js Resources to Level Up</a>
                        </li>
                        <li>
                            <a target="_blank" href="https://www.dashingd3js.com/">Dashing D3 Newsletter</a>
                        </li>
                    </ul>
                </section>

                <!-- Example Search -->
                <section>
                    <h2>Example search</h2>
                    <ul>
                        <li>
                            Search by chart type -> <a target="_blank" href="http://christopheviau.com/d3list/gallery.html">Christophe Viau's Gallery</a>
                        </li>
                        <li>
                            Search by D3 component -> <a target="_blank" href="http://bl.ocksplorer.org/">Block Explorer</a>
                        </li>
                    </ul>
                </section>

                <!-- Books -->
    			<section>
    				<section>
    					<h2>Books</h2>
    				</section>

    				<section>
    					<a target="_blank" href="http://shop.oreilly.com/product/0636920037316.do"><img src="img/books/interactivedatacover.jpg" style="width: 50%;"></a>
    					<aside class="notes">
    						<ul>
    							<li>Intro Book for everyone</li>
    							<li>Starting from 0 and no experience on FE</li>
    							<li>GeoJSON and Maps</li>
    						</ul>
    					</aside>
    				</section>

    				<section>
    					<img src="img/books/developingad3edge.jpg" style="width: 50%;">
    					<aside class="notes">
    						<ul>
    							<li>Reusable charts in a way we could all use</li>
    							<li>Charts are simple and test friendly</li>
    							<li>You can create larger ones by composition</li>
    							<li>Introduces a data loader module</li>
    							<li>Proposes some tests with Jasmine</li>
    							<li>All in a small size</li>
    						</ul>
    					</aside>
    				</section>

    				<section>
    					<img src="img/books/MasteringD3.jpg" style="width: 50%;">
    					<aside class="notes">
    						<ul>
    							<li>Same Reusable charts</li>
    							<li>Ambitious book, almost a reference</li>
    							<li>Integrations: Backbone, Socket.IO, Mapbox.</li>
    							<li>Great number of different charts: Choropleth, Area, Advanced Maps</li>
    							<li>Bower Package using Grunt for build and Vows for testing</li>
    							<li>Less Importance to Tests, great book</li>
    						</ul>
    					</aside>
    				</section>
    			</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>
		<script src="js/d3.js"></script>
        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-1581349-11', 'auto');
          ga('send', 'pageview');
        </script>

		<script>
			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,


                transition: 'slide', // none/fade/slide/convex/concave/zoom

                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });

            // Configuration to make the right arrow always do next
            // keyboard: {
            //     39: 'next',
            //     37: 'prev'
            // },
		</script>

	</body>
</html>
